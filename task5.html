<!DOCTYPE html>
<html>
<head>
  <title>Task 5 - Runtime Errors</title>
</head>
<body>
  <h1>Debugging Task 5: Runtime Errors</h1>

  <script>
    /*
      There are 4 bugs:
    */

    // We'll attempt to fetch some posts from JSONPlaceholder
    // Then we want to log the length of the array, and one of the post titles.

    fetch('jsonplaceholder.typicode.com/posts')
      .then(response => {
        return response; 
      })
      .then(posts => {
        // See how many posts were fetched
        console.log("Number of posts fetched:", posts.length);

        console.log("Title of post at index 10:", posts[10].title);

        console.log("NVar is:", nVar);

        posts.forEach(element => {
            addParagraph('<h2>'+element.title+'</h2><p>'+element.body+'</p>');
        });

      })
      .catch(error => {
        console.error("Error while fetching posts:", error);
      });

    function addParagraph(text) {
        let p = document.createElement('div');
        p.innerHTML = text;
        document.body.appendChild(p);
    }

    console.log("End of Task 3 script. Fix the runtime issues!");
  </script>
</body>
</html>
